{% comment %}
====================================================================================
  REVAMPED FOOTER SECTION
  - Added: Optional Animated Gradient Background for a dynamic feel.
  - Added: Optional "Glassmorphism" effect for content when a background is used.
  - Added: Subtle hover animations on content blocks.
  - Added: Fade-in animation for the entire section on load.
  - Added: New schema settings to control these unique effects.
====================================================================================
{% endcomment %}

{%- liquid
  assign animation_duration = section.settings.animation_duration | append: 's'
-%}

<style>
  /* Scoped styles for this specific section */
  .section--{{ section.id }} .section-background {
    {% if section.settings.background_media == 'none' and section.settings.enable_gradient_background %}
      --gradient-color-1: {{ section.settings.color_scheme.settings.background | color_modify: 'lightness', section.settings.color_scheme.settings.background.lightness | plus: 2 }};
      --gradient-color-2: {{ section.settings.color_scheme.settings.background }};
      --gradient-color-3: {{ section.settings.color_scheme.settings.background | color_modify: 'hue', section.settings.color_scheme.settings.background.hue | plus: 20 }};
      --gradient-color-4: {{ section.settings.color_scheme.settings.background | color_modify: 'lightness', section.settings.color_scheme.settings.background.lightness | minus: 2 }};
      
      background: linear-gradient(-45deg, var(--gradient-color-1), var(--gradient-color-2), var(--gradient-color-3), var(--gradient-color-4));
      background-size: 400% 400%;
      animation: gradient-flow {{ animation_duration | times: 10 }} ease infinite;
    {% endif %}
  }

  @keyframes gradient-flow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .section--{{ section.id }} .section-content-wrapper {
    animation: fade-in-up {{ animation_duration }} ease-out;
  }
  
  {% if section.settings.enable_glass_effect and section.settings.background_media != 'none' %}
    .section--{{ section.id }} .section-content-wrapper {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.15);
      /* Add internal padding to glass effect */
      padding: 2rem;
    }
  {% endif %}

  .section--{{ section.id }} .section-content-wrapper > * {
    transition: transform {{ animation_duration }} ease, box-shadow {{ animation_duration }} ease;
  }

  .section--{{ section.id }} .section-content-wrapper > *:hover {
    transform: translateY(-4px);
  }

  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<div
  class="
    section section--{{ section.id }} section--{{ section.settings.section_width }} color-{{ section.settings.color_scheme }}
    {% if section.settings.section_height != "" %} {{ section.settings.section_height | prepend: "section--height-" }}{% endif %}
  "
>
  {% render 'background-media',
    background_media: section.settings.background_media,
    background_video: section.settings.video,
    background_video_position: section.settings.video_position,
    background_image: section.settings.background_image,
    background_image_position: section.settings.background_image_position
  %}

  <div
    class="
      spacing-style
      layout-panel-flex
      layout-panel-flex--{{ section.settings.content_direction }}
      section-content-wrapper
      {% if section.settings.vertical_on_mobile %} mobile-column{% endif %}
    "
    style="
      {% render 'layout-panel-style', settings: section.settings %}
      {% render 'spacing-style', settings: section.settings %}
    "
  >
    {% content_for 'blocks' %}
  </div>
</div>

{% schema %}
{
  "name": "t:names.footer",
  "class": "section-wrapper",
  "tag": "footer",
  "blocks": [
    { "type": "_divider" },
    { "type": "@app" },
    { "type": "button" },
    { "type": "email-signup" },
    { "type": "follow-on-shop" },
    { "type": "footer-utilities" },
    { "type": "group" },
    { "type": "icon" },
    { "type": "image" },
    { "type": "menu" },
    { "type": "payment-icons" },
    { "type": "text" },
    { "type": "logo" },
    { "type": "jumbo-text" }
  ],
  "enabled_on": {
    "groups": ["footer"]
  },
  "settings": [
    {
      "type": "header",
      "content": "t:content.layout"
    },
    {
      "type": "select",
      "id": "content_direction",
      "label": "t:settings.direction",
      "options": [
        { "value": "column", "label": "t:options.vertical" },
        { "value": "row", "label": "t:options.horizontal" }
      ],
      "default": "column"
    },
    {
      "type": "checkbox",
      "id": "vertical_on_mobile",
      "label": "t:settings.vertical_on_mobile",
      "default": true,
      "info": "Stack content vertically on mobile devices."
    },
    {
      "type": "select",
      "id": "horizontal_alignment",
      "label": "t:settings.alignment",
      "options": [
        { "value": "flex-start", "label": "t:options.left" },
        { "value": "center", "label": "t:options.center" },
        { "value": "flex-end", "label": "t:options.right" },
        { "value": "space-between", "label": "t:options.space_between" }
      ],
      "default": "flex-start",
      "visible_if": "{{ section.settings.content_direction == 'row' }}"
    },
    {
      "type": "select",
      "id": "vertical_alignment",
      "label": "t:settings.position",
      "options": [
        { "value": "flex-start", "label": "t:options.top" },
        { "value": "center", "label": "t:options.center" },
        { "value": "flex-end", "label": "t:options.bottom" }
      ],
      "default": "center",
      "visible_if": "{{ section.settings.content_direction == 'row' }}"
    },
    {
      "type": "checkbox",
      "id": "align_baseline",
      "label": "t:settings.align_baseline",
      "default": false,
      "visible_if": "{{ section.settings.vertical_alignment == 'flex-end' }}"
    },
    {
      "type": "select",
      "id": "horizontal_alignment_flex_direction_column",
      "label": "t:settings.alignment",
      "options": [
        { "value": "flex-start", "label": "t:options.left" },
        { "value": "center", "label": "t:options.center" },
        { "value": "flex-end", "label": "t:options.right" }
      ],
      "default": "flex-start",
      "visible_if": "{{ section.settings.content_direction != 'row' }}"
    },
    {
      "type": "select",
      "id": "vertical_alignment_flex_direction_column",
      "label": "t:settings.position",
      "options": [
        { "value": "flex-start", "label": "t:options.top" },
        { "value": "center", "label": "t:options.center" },
        { "value": "flex-end", "label": "t:options.bottom" },
        { "value": "space-between", "label": "t:options.space_between" }
      ],
      "default": "center",
      "visible_if": "{{ section.settings.content_direction == 'column' }}"
    },
    {
      "type": "range",
      "id": "gap",
      "label": "t:settings.gap",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "header",
      "content": "t:content.size"
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "t:settings.width",
      "options": [
        { "value": "page-width", "label": "t:options.page" },
        { "value": "full-width", "label": "t:options.full" }
      ],
      "default": "page-width"
    },
    {
      "type": "select",
      "id": "section_height",
      "label": "t:settings.height",
      "options": [
        { "value": "", "label": "t:options.auto" },
        { "value": "small", "label": "t:options.small" },
        { "value": "medium", "label": "t:options.medium" },
        { "value": "large", "label": "t:options.large" },
        { "value": "full-screen", "label": "t:options.full_screen" }
      ],
      "default": ""
    },
    {
      "type": "header",
      "content": "t:content.appearance"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "scheme-1"
    },
    {
      "type": "select",
      "id": "background_media",
      "label": "t:settings.background_media",
      "options": [
        { "value": "none", "label": "t:options.none" },
        { "value": "image", "label": "t:options.image" },
        { "value": "video", "label": "t:options.video" }
      ],
      "default": "none"
    },
    {
      "type": "video",
      "id": "video",
      "label": "t:settings.video",
      "visible_if": "{{ section.settings.background_media == 'video' }}"
    },
    {
      "type": "select",
      "id": "video_position",
      "label": "t:settings.video_position",
      "options": [
        { "value": "cover", "label": "t:options.cover" },
        { "value": "contain", "label": "t:options.contain" }
      ],
      "default": "cover",
      "visible_if": "{{ section.settings.background_media == 'video' }}"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "t:settings.image",
      "visible_if": "{{ section.settings.background_media == 'image' }}"
    },
    {
      "type": "select",
      "id": "background_image_position",
      "label": "t:settings.image_position",
      "options": [
        { "value": "cover", "label": "t:options.cover" },
        { "value": "fit", "label": "t:options.fit" }
      ],
      "default": "cover",
      "visible_if": "{{ section.settings.background_media == 'image' }}"
    },
    {
      "type": "header",
      "content": "âœ¨ Unique Effects & Animations"
    },
    {
      "type": "checkbox",
      "id": "enable_gradient_background",
      "label": "Enable Animated Gradient Background",
      "info": "Applies a dynamic gradient based on your color scheme. Only active when 'Background Media' is 'None'.",
      "default": true,
      "visible_if": "{{ section.settings.background_media == 'none' }}"
    },
    {
      "type": "checkbox",
      "id": "enable_glass_effect",
      "label": "Enable 'Frosted Glass' Effect",
      "info": "Turns the content panel into a frosted glass card. Best used with a background image or video.",
      "default": false,
      "visible_if": "{{ section.settings.background_media != 'none' }}"
    },
    {
      "type": "range",
      "id": "animation_duration",
      "label": "Animation Speed",
      "min": 0.2,
      "max": 2.0,
      "step": 0.1,
      "unit": "s",
      "default": 0.5
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ]
}
{% endschema %}